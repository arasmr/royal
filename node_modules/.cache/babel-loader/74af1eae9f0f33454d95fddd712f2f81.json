{"ast":null,"code":"var cloudName = 'djgv39mwv';\nvar unsignedUploadPreset = 'Your upload preset';\nvar fileSelect = document.getElementById(\"image\"),\n    fileElem = document.getElementById(\"image\");\nfileSelect.addEventListener(\"click\", function (e) {\n  if (fileElem) {\n    fileElem.click();\n  }\n\n  e.preventDefault(); // prevent navigation to \"#\"\n}, false); // ************************ Drag and drop ***************** //\n\nfunction dragenter(e) {\n  e.stopPropagation();\n  e.preventDefault();\n}\n\nfunction dragover(e) {\n  e.stopPropagation();\n  e.preventDefault();\n}\n\nvar dropbox = document.getElementById(\"\");\ndropbox.addEventListener(\"dragenter\", dragenter, false);\ndropbox.addEventListener(\"dragover\", dragover, false);\ndropbox.addEventListener(\"drop\", drop, false);\n\nfunction drop(e) {\n  e.stopPropagation();\n  e.preventDefault();\n  var dt = e.dataTransfer;\n  var files = dt.files;\n  handleFiles(files);\n} // *********** Upload file to Cloudinary ******************** //\n\n\nexport default function uploadFile(file) {\n  var url = \"https://api.cloudinary.com/v1_1/\".concat(cloudName, \"/upload\");\n  var xhr = new XMLHttpRequest();\n  var fd = new FormData();\n  xhr.open('POST', url, true);\n  xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest'); // Reset the upload progress bar\n\n  document.getElementById('progress').style.width = 0; // Update progress (can be used to show progress indicator)\n\n  xhr.upload.addEventListener(\"progress\", function (e) {\n    var progress = Math.round(e.loaded * 100.0 / e.total);\n    document.getElementById('progress').style.width = progress + \"%\";\n    console.log(\"fileuploadprogress data.loaded: \".concat(e.loaded, \",\\n  data.total: \").concat(e.total));\n  });\n\n  xhr.onreadystatechange = function (e) {\n    if (xhr.readyState == 4 && xhr.status == 200) {\n      // File uploaded successfully\n      var response = JSON.parse(xhr.responseText); // https://res.cloudinary.com/cloudName/image/upload/v1483481128/public_id.jpg\n\n      var url = response.secure_url; // Create a thumbnail of the uploaded image, with 150px width\n\n      var tokens = url.split('/');\n      tokens.splice(-2, 0, 'w_150,c_scale');\n      var img = new Image(); // HTML5 Constructor\n\n      img.src = tokens.join('/');\n      img.alt = response.public_id;\n      document.getElementById('gallery').appendChild(img);\n    }\n  };\n\n  fd.append('upload_preset', unsignedUploadPreset);\n  fd.append('tags', 'browser_upload'); // Optional - add tag for image admin in Cloudinary\n\n  fd.append('file', file);\n  xhr.send(fd);\n} // *********** Handle selected files ******************** //\n\nvar handleFiles = function handleFiles(files) {\n  for (var i = 0; i < files.length; i++) {\n    uploadFile(files[i]); // call the function to upload the file\n  }\n};","map":{"version":3,"sources":["/Users/emrearas/Desktop/royal/src/uploadImage.js"],"names":["cloudName","unsignedUploadPreset","fileSelect","document","getElementById","fileElem","addEventListener","e","click","preventDefault","dragenter","stopPropagation","dragover","dropbox","drop","dt","dataTransfer","files","handleFiles","uploadFile","file","url","xhr","XMLHttpRequest","fd","FormData","open","setRequestHeader","style","width","upload","progress","Math","round","loaded","total","console","log","onreadystatechange","readyState","status","response","JSON","parse","responseText","secure_url","tokens","split","splice","img","Image","src","join","alt","public_id","appendChild","append","send","i","length"],"mappings":"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","sourcesContent":["const cloudName = 'djgv39mwv';\nconst unsignedUploadPreset = 'Your upload preset';\n\nvar fileSelect = document.getElementById(\"image\"),\n  fileElem = document.getElementById(\"image\");\n\nfileSelect.addEventListener(\"click\", function(e) {\n  if (fileElem) {\n    fileElem.click();\n  }\n  e.preventDefault(); // prevent navigation to \"#\"\n}, false);\n\n// ************************ Drag and drop ***************** //\nfunction dragenter(e) {\n  e.stopPropagation();\n  e.preventDefault();\n}\n\nfunction dragover(e) {\n  e.stopPropagation();\n  e.preventDefault();\n}\n\nlet dropbox = document.getElementById(\"\");\ndropbox.addEventListener(\"dragenter\", dragenter, false);\ndropbox.addEventListener(\"dragover\", dragover, false);\ndropbox.addEventListener(\"drop\", drop, false);\n\nfunction drop(e) {\n  e.stopPropagation();\n  e.preventDefault();\n\n  var dt = e.dataTransfer;\n  var files = dt.files;\n\n  handleFiles(files);\n}\n\n// *********** Upload file to Cloudinary ******************** //\nexport default function uploadFile(file) {\n  var url = `https://api.cloudinary.com/v1_1/${cloudName}/upload`;\n  var xhr = new XMLHttpRequest();\n  var fd = new FormData();\n  xhr.open('POST', url, true);\n  xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n\n  // Reset the upload progress bar\n   document.getElementById('progress').style.width = 0;\n  \n  // Update progress (can be used to show progress indicator)\n  xhr.upload.addEventListener(\"progress\", function(e) {\n    var progress = Math.round((e.loaded * 100.0) / e.total);\n    document.getElementById('progress').style.width = progress + \"%\";\n\n    console.log(`fileuploadprogress data.loaded: ${e.loaded},\n  data.total: ${e.total}`);\n  });\n\n  xhr.onreadystatechange = function(e) {\n    if (xhr.readyState == 4 && xhr.status == 200) {\n      // File uploaded successfully\n      var response = JSON.parse(xhr.responseText);\n      // https://res.cloudinary.com/cloudName/image/upload/v1483481128/public_id.jpg\n      var url = response.secure_url;\n      // Create a thumbnail of the uploaded image, with 150px width\n      var tokens = url.split('/');\n      tokens.splice(-2, 0, 'w_150,c_scale');\n      var img = new Image(); // HTML5 Constructor\n      img.src = tokens.join('/');\n      img.alt = response.public_id;\n      document.getElementById('gallery').appendChild(img);\n    }\n  };\n\n  fd.append('upload_preset', unsignedUploadPreset);\n  fd.append('tags', 'browser_upload'); // Optional - add tag for image admin in Cloudinary\n  fd.append('file', file);\n  xhr.send(fd);\n}\n\n// *********** Handle selected files ******************** //\nvar handleFiles = function(files) {\n  for (var i = 0; i < files.length; i++) {\n    uploadFile(files[i]); // call the function to upload the file\n  }\n};"]},"metadata":{},"sourceType":"module"}